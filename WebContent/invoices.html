<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Miller Home</title>


	<!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/findProjectNew.css" rel="stylesheet">
    <link href="css/projectManagerNew.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/projects.css" rel="stylesheet">
    <link href="css/theme/currentTheme/chosen.min.css" rel="stylesheet"/>
    <link href="css/modal.css" rel="stylesheet">
    <link href="css/theme/currentTheme/jquery-ui-1.10.4.custom.css" rel="stylesheet"/>
    <link href="css/invoices.css" rel="stylesheet">
    <link rel="stylesheet" href="css/jquery.hovertruncated.css" />


	<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>  -->
	<script src="js/jquery.js"></script>
	<script type="text/javascript" src="js/jquery-ui-1.10.4.custom.js" ></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/homepage.js"></script>
    <script src="js/global.js"></script>
    <script src="js/contentControl.js"></script>
    <script src="js/projectRetrieval.js"></script>
    <script src="js/invoices.js"></script>
    <script src="js/chosen.jquery.min.js"></script>
    <!-- <script src="js/jquery.hovertruncated.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>  -->
    
    
	<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>  -->
	
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.7.7/xlsx.core.min.js"></script> -->

    
    
    <link href="https://fonts.googleapis.com/css?family=Mada" rel="stylesheet">
  </head>	
  
  <body onload="getAllProjects()">
  
  
	<nav class="navbar navbar-default">
		  <div class="container-fluid">
		    <div class="navbar-header">
		      <a class="navbar-brand" href="#">Miller Construction Services</a>
		    </div>
		    <ul class="nav navbar-nav">
		      <li><a href="homepage.html">Home</a></li>
		      <li class="dropdown">
		        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Projects
		        <span class="caret"></span></a>
		        <ul class="dropdown-menu">
		          <li><a href="projectData.html" onmouseover="style='background-color: rgb(42, 112, 224); color: white'"
		      		onmouseout="style='background-color: none;'">Add Project</a></li>
		          <li><a href="projects.html" onmouseover="style='background-color: rgb(42, 112, 224); color: white'"
		      		onmouseout="style='background-color: none;'">Find Projects</a></li>
		        </ul>
		      </li>
		   <li class='dropdown'>
	      	<a class='dropdown-toggle' data-toggle='dropdown' href='#'>Tasks
	      		<span class='caret'></span>
	      	</a>
	      	<ul class='dropdown-menu'>
	      	
	      		<li><a href='taskBrowser.html'  
	      		onmouseover="style='background-color: rgb(42, 112, 224); color: white'"
	      		onmouseout="style='background-color: none;'">Your Tasks</a></li>
	      		
	      		<li><a href='projects.html?type=findTaskProject'
	      		 onmouseover="style='background-color: rgb(42, 112, 224); color: white'"
	      		onmouseout="style='background-color: none;'">Create Task</a></li>
	      		
	      	</ul>
	      </li>
	      
	      <li class = "active"><a href="invoices.html">Invoices</a></li>
	      
		      <li><a href="query.html">Reports</a></li>
		      
		      <li class="adminContent"><a href="additions.html">Tools</a></li>
		    </ul>
		    <ul class="nav navbar-nav navbar-right">
		      <li><a href="logout.html"><span class="glyphicon glyphicon-log-in"></span> Logout</a></li>
		    </ul>
		  </div>
		</nav>
		
		
	<!-- Tab links -->
<div class="tab">
  <button class="tablinks" onclick="openTab(event, 'invoiceMain')" id = "defaultOpen">Invoice Queue</button>
  <button class="tablinks" onclick="openTab(event, 'changeApprovals')">Invoice Approval List</button>
</div>
		
		
		<div class = "container info-tab-peInformation tabcontent active" id = "invoiceMain">
		
		
		
		
		    <div style="width:100%" class = "changeOrderTableDiv" id = 'invoiceDisplay' >
		    										
		      <select id ='invoiceSelector2' class='form-control' style = "width:200px;display:inline;">
					<option value='all' selected = "selected">All</option>
					<option value='requested'>Requested</option>
					<option value='processing'>Processing</option>
					<option value='review'>Review</option>
					<option value='approved'>Approved</option>
					<option value='submitted'>Submitted</option>
					<option value='rejected'>Rejected</option>
			 </select>
			 
			<!--  <div style = "display:inline;">&nbsp&nbsp Invoice Reviewers</div> -->
			 
			 <div style = "display:inline;">&nbsp&nbsp</div>
			 <div id = "usersSelection" style = "display:inline;">
			 	
			 
			 
			 </div>
		      <div class="generalOverFlowScroll" style:="max-height:820px ! important; ">
		         <table class='table table-striped permitsAndInspectionsHovering' id='invoiceTable'>
		            <tr class='head'>
						
						<!--  <th>PE #</th>-->
						<th width = "10%" >Customer Group</th>
						<th width = "10%" >Location</th>
						<th width = "10%" >Project</th>
						
						<th width = "10%" >MCS-PE #</th>
						<!--  <th>PE #</th>-->
						<!--  <th>Title</th>-->
						<!--  <th>Invoice Type</th>-->
						<th width = "10%" >Amount</th>
						
						<th width = "10%" >Status</th>	
						<th width = "10%" >Requested</th>
						<th width = "10%" >Completed</th>
						
						<!--  <th>Approval</th>-->					
						<!--  <th>WS Invoice #</th>  -->	
						<!-- <th>&nbsp;</th>	-->			
						<th>&nbsp;</th>
						<th>&nbsp;</th>
						<th>&nbsp;</th>
		            </tr>
		         </table>
		      </div>		      
		   </div>
		   <div style = "height:60%;width:26%;padding:2px; "id = 'invoiceCreationZone' class = 'bg-modal'>
		   
		   <div class = "modal-contents">
		 
		      <div class='base-field'>
		         <table class='table invCreationTable table table-striped permitsAndInspectionsHovering'>
		            
		            <tr id = hide9>
		               <td><label for='invoiceTitle'>Title:  <span style="color:#FF0000;">*</span></label>
		               <td><input type='text' id='invoiceTitle'/>
		               
		            </tr>
		            
		            <tr id = "percentOrAmountRow" style = "display : none">
		            <td><label>Amount<span style="color:#FF0000">*</span></label></td>
		            <td>
		            <select id="percentOrAmount" class="pointer" onfocus="this.setAttribute('PrvSelectedValue',this.value);" onchange="showAmountBox()">
	        	
	        			<option value="0">Custom $</option>
                		<option value="1">Custom %</option>  
                		<option value="2">Balance</option>   
            		</select>
            		</td>
            		</tr>
		            
		            <tr id = "invoiceAmountHide">
		               <td><label for='invoiceAmount'>Invoice Amount:  <span style="color:#FF0000">*</span></label>
		               <td><input type='text' id='invoiceAmount' pattern="[0-9]$,"/>
		            </tr>
		            
		            		            
		       <!--      <tr id = "invoicePercentHide">
		               <td><label for='invoicePercent'>Invoice Percent:  <span style="color:#FF0000">*</span></label>
		               <td><input type='text' id='invoicePercent' onchange='populateInvoiceAmt()'/>
		            </tr> -->
		            
		            
		            <tr id = "invoiceStatusSelectionRow" style = "display : none">
		               <td><label>Status <span style="color:#FF0000">*</span></label></td>
		               <td>
		                  <select id = "invoiceStatus" onfocus="this.setAttribute('PrvSelectedValue',this.value);" onchange="submitRejectDateCheck()">
		                     <option value="Requested"> Requested </option>
		                     <option value="Processing"> Processing</option>
		                     <option id="Review"  value="Review"> Review</option>
		                     <option id="Approved"  value="Approved"> Approved</option>
		                     <option id="Submitted"  value="Submitted"> Submitted </option>
		                     <option id="Rejected"  value="Rejected"> Rejected </option>
		                  </select>
		               </td>
		            </tr>
		            
		            
		            <tr id = hide1>
		            <td><label for='associatedPE'>Associated PE #<span style="color:#FF0000">*</span></label>
		            <td><input type='text' id='associatedPE' readonly/>
		            </tr>  
		            
		            <tr id = hide2>
		               <td><label for='invoiceID'>PE Invoice # <span style="color:#FF0000">*</span></label>
		               <td><input type='text' id='invoiceID' readonly/>
		            </tr>
		            
		            <tr id = hide3>
		               <td><label for='invoiceNumber'>WS Invoice # <span style="color:#FF0000"></span></label></td>
		               <td><input type='text' id='invoiceNumber'></td>
		               </tr>
		           
		            
		            <tr id = hide4>
		               <td><label for='invoiceType'>Type:  <span style="color:#FF0000">*</span></label>
		               <td><input type='text' id='invoiceType' readonly/>
		               
		            </tr>
		            
		            <tr id = hide5>
		               <td><label for='submittedDateInv'>Invoice Prep Date: <span style="color:#FF0000">*</span></label></td>
		               <td><input type='text' id='submittedDateInv' readonly>
		            </tr>
		            
		            <tr id = hide10>
		               <td><label for='submitRejectDate'>Submit/Reject Date: <span style="color:#FF0000">*</span></label></td>
		               <td><input type='text' id='submitRejectDate'>
		            </tr>
	

    		         <tr id = hide6>
		               <td><label for='invoiceCustomer'>Customer <span style="color:#FF0000">*</span></label></td>
		               
		               	<td><input type='text' id='invoiceCustomer'/ readonly>
		               
		               
		            </tr>
		            
		            
		            <tr id = hide7>
		               <td><label for='invoiceApproval'>Approval:  <span style="color:#FF0000"></span></label>
		               <td><input type='text' id='invoiceApproval'/>
		               
		            </tr>
		            
		            <tr id = hide8>
		               <td><label for='notes'>Notes:  <span style="color:#FF0000"></span></label>
		               <td><input type='text' id='notes'/>
		               
		            </tr>
		            
		            
		             <tr id = hide13>
		            <td><b>Approval 1</b></td>
		             <td >  
                    <select class="closeout-input" id="approval1">
                        <option value="default">--Status--</option>
                        <option value="1">Yes</option>
                        <option value="2">No</option>
                    </select>
                </td>
                </tr>
                
                
                <tr id = hide14>
                <td><b>Approval 2</b></td>
		             <td >  
                    <select class="closeout-input" id="approval2">
                        <option value="default">--Status--</option>
                        <option value="1">Yes</option>
                        <option value="2">No</option>
                    </select>
                </td>
                </tr>
                
                
                <tr id = hide15>
                <td><b>Approval 3</b></td>
		             <td >  
                    <select class="closeout-input" id="approval3">
                        <option value="default">--Status--</option>
                        <option value="1">Yes</option>
                        <option value="2">No</option>
                    </select>
                </td>
                </tr>
		            
		            
		            
		            <tr id = hide11>
		               <td><label for='invoiceID'>Invoice ID:  <span style="color:#FF0000"></span></label>
		               <td><input type='text' id='invoiceID'/>
		               
		            </tr>
		            
		            <tr id = hide12>
		               <td><label for='projID'>projID:  <span style="color:#FF0000"></span></label>
		               <td><input type='text' id='projID'/>
		               
		            </tr>
		                 		         
		         </table>
		         
		      </div>
		      <button style = "float:center" onclick='submitInv()' class='btn btn-success'>Save Invoice</button>
		      <button style = "float:right; margin-right:5px;background-color: #4169E1;color: white;" onclick='viewInv()' class='btn'>Back to Invoice View</button>
		      
		      </div>
		   </div>
		   </div>
	
		<!--approval count tab -->
		<div id="changeApprovals" class="tabcontent container info-tab-peInformation">
		
		<div style="width:100%" class = "changeOrderTableDiv" id = 'invoiceSystemDetails'>
		
			<form>
				<table>
		  		<tbody>
		  			<tr height = "30">
		  				<td>
		  					Current number of Approvals: 
		  				</td>
		  				<td colspan = "2" id = "noOfApprovalsCurrent">
		  					 
		  				</td>
		  				
		  			</tr>
		  			<tr height = "30">
		  				<td>
		  					Members:
		  				</td>
		  				<td colspan = "2" id = "approvingMembers">
		  					 
		  				</td>
		  				
		  				<td>
		  					<input type="button" value="Submit" onClick = "modifyApprovingMembers()">
		  				</td>
		  			</tr>
		  			<tr height = "30">
		  				<td>
		  					Number of Approvals:
		  				</td>
		  				<td>
		  					 <input type="text" id="noOfApprovals">
		  				</td>
		  				<td></td>
		  				<td>
		  					<input type="button" value="Submit" onClick = "modifyNoOfApprovals()">
		  				</td>
		  			</tr>
		  		
		  		</tbody>
		  		</table>  
			  
			</form>	
		</div>
		</div>
		
	<!--  NOTES MODAL BOX -->
	
	
	<DIV id='PopUp' style='display: none; position: absolute; left: 100px; top: 50px; border: solid black 1px; padding: 10px; background-color: rgb(200,100,100); text-align: justify; font-size: 12px; width: 135px;' onmouseover="document.getElementById('PopUp').style.display = 'none' ">
	<SPAN id='PopUpText'>TEXT</SPAN>
	</DIV>
	
	<!--  Approvals MODAL BOX -->
	<DIV id='PopUp' style='display: none; position: absolute; left: 100px; top: 50px; border: solid black 1px; padding: 10px; background-color: rgb(200,100,100); text-align: justify; font-size: 12px; width: 135px;' onmouseover="document.getElementById('PopUp').style.display = 'none' ">
	<SPAN id='PopUpTextApprovals'>TEXT</SPAN>
	</DIV>

	<!--  Project full name modal box -->
	<DIV id='PopUpProject' style='display: none; position: absolute; left: 100px; top: 50px; border: solid black 1px; padding: 10px; background-color: rgb(200,100,100); text-align: justify; font-size: 12px; width: 135px;' onmouseover="document.getElementById('PopUp').style.display = 'none' ">
		<SPAN id='PopUpTextProject'>TEXT</SPAN>
	</DIV>

	<!--  Customer full name modal box -->
	<DIV id='PopUpInvoiceCustomer' style='display: none; position: absolute; left: 100px; top: 50px; border: solid black 1px; padding: 10px; background-color: rgb(200,100,100); text-align: justify; font-size: 12px; width: 135px;' onmouseover="document.getElementById('PopUp').style.display = 'none' ">
		<SPAN id='PopUpTextInvoiceCustomer'>TEXT</SPAN>
	</DIV>

	
	<!--  NOTES EDIT MODAL BOX -->
	<DIV id='editNotes' style='display: none; position: absolute; left: 100px; top: 50px; border: solid black 1px; padding: 10px; background-color: rgb(200,100,100); text-align: justify; font-size: 12px; width: 135px;' onmouseover="document.getElementById('editNotes').style.display = 'none' ">
		<SPAN id='editNotesText' >
			TEXT</SPAN>
	</DIV>
	
	<!-- model box for notes addition  -->
	<!-- The Modal -->
	<div id="notesModal" class="modalAG">
		<div class="Modal" id="modal-attachAG">
			<a class=closeAGNotes>&times;</a>
			<div class="Modal-heading">Notes</div>
			<input type="checkbox" id="incorrectAmount" name="incorrectAmount">
 			<label style = "font-weight: 500" for="incorrectAmount"> Incorrect Amount</label><br>
 			<input type="checkbox" id="incorrectCustomer" name="incorrectCustomer">
 			<label style = "font-weight: 500" for="incorrectCustomer"> Incorrect Customer</label><br>
 			<input type="checkbox" id="customerRejected" name="customerRejected">
 			<label style = "font-weight: 500" for="customerRejected"> Customer Rejected</label><br>
 			<input type="checkbox" id="incompleteWork" name="incompleteWork">
 			<label style = "font-weight: 500" for="incompleteWork"> Incomplete Work</label><br>
			<textarea rows="2" cols="40" id="invoiceNotes" maxlength="1000" placeholder="Please describe"></textarea>
			<div class="u-margin-top--x-large">
				<input type="checkbox" id="invoiceNoteId" style="display:none">
				<button class="Button Button--outline u-float--right"
					id="saveInvoiceNotes">Save Notes</button>
				<button class="Button Button--outline u-float--right"
					id="closeInvoiceModal">Cancel</button>

			</div>
		</div>
	</div>
	<!-- The Modal -->
<div id="myModalAG" class="modalAG">

<!--
 https://codepen.io/paddyduke/pen/NRvVwR
 https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_modal 
-->
  <div class="Modal" id="modal-attach">
    <a class="closeAG">&times;</a>
    <div class="Modal-heading">
      Attach File
    </div>
    <p>
      Choose a file to attach.
    </p>
    <ul class="FileList">
      <li>
        <label for="file--01">          
          <i class="Icon Icon--small Icon--file"></i>
          <span id='invoiceFileName' class="File-name has-Icon">
            invoice-file-name.pdf
          </span>
        </label>
       <!--  <a id='previewInvoice' class="u-margin-left--small">Preview</a> -->
      </li>
    </ul>
    <div class="u-margin-top--x-large">
      
      <button class="Button Button--outline u-float--right" id="uploadInvoiceFile">
        Upload a new file
      </button>
        <button class="Button Button--outline u-float--right" id="previewInvoice">
        Preview existing file
      </button>
      
    </div>
  </div>


  <!-- Modal content
  <div class="modal-content-ag">
    <span class="closeAG">&times;</span>
    <p>File Name Here</p>
    <form method="POST" enctype="multipart/form-data" id="fileUploadForm">
    <input type="file" name="filepdf" id = "filepdf" accept = ".pdf"/><br/><br/>
    <input type="submit" value="Upload" id="btnSubmit"/>
    <input type="button" value="Remove" id="btnSubmit"/>
</form>
    
  </div> -->
</div>	
	
<form method="post" action="fileuploadservlet" enctype="multipart/form-data" id = "fileForm" style= "display:none;">
    <input type="file" name="file" id = "file" accept = ".pdf"/>
    <input type="submit" value="Upload" id = "uploadFile"/>
    
 </form>

<form method="POST" enctype="multipart/form-data" id="fileUploadForm" style = "display:none;" >
    <input type="text" name="extraField"/><br/><br/>
    <input type="file" name="filepdf" id = "filepdf" accept = ".pdf"/><br/><br/>
    <input type="submit" value="Submit" id="btnSubmit"/>
</form>

<input id='username' type='hidden' value='${sessionScope.user}'/> 






</body>
</html>